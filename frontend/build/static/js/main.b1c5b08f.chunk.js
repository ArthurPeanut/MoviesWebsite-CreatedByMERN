(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{56:function(e,t,a){e.exports=a(74)},63:function(e,t,a){},74:function(e,t,a){"use strict";a.r(t);var n=a(0),l=a.n(n),r=a(51),c=a.n(r),o=(a(63),a(18)),i=a(10),m=(a(33),a(44)),s=a(35),u=a(77);const v=Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0}).REACT_APP_PROD_URL;var E=new class{getAll(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return u.a.get("".concat(v,"/api/v1/movies?page=").concat(e))}get(e){return u.a.get("".concat(v,"/api/v1/movies/id/").concat(e))}find(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"title",a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return u.a.get("".concat(v,"/api/v1/movies?").concat(t,"=").concat(e,"&page=").concat(a))}createReview(e){return u.a.post("".concat(v,"/api/v1/movies/review"),e)}updateReview(e){return u.a.put("".concat(v,"/api/v1/movies/review"),e)}deleteReview(e,t){return u.a.delete("".concat(v,"/api/v1/movies/review"),{data:{review_id:e,username:t}})}getRatings(){return u.a.get("".concat(v,"/api/v1/movies/ratings"))}},d=a(11),p=a(26);var g=e=>{let t=!1,a="";e.location.state&&e.location.state.currentReview&&(t=!0,a=e.location.state.currentReview.review);const[r,c]=Object(n.useState)(a),[i,m]=Object(n.useState)(!1);return l.a.createElement("div",null,i?l.a.createElement("div",null,l.a.createElement("h4",null,"Review submitted successfully"),l.a.createElement(o.b,{to:"/movies/"+e.match.params.id},"Back to Movie")):l.a.createElement(d.a,null,l.a.createElement(d.a.Group,null,l.a.createElement(d.a.Label,null,t?"Edit":"Create"," Review"),l.a.createElement(d.a.Control,{type:"text",required:!0,value:r,onChange:e=>{const t=e.target.value;c(t)}})),l.a.createElement(p.a,{variant:"primary",onClick:()=>{var a={review:r,name:e.user.name,movie_id:e.match.params.id};t?(a.review_id=e.location.state.currentReview._id,E.updateReview(a).then(e=>{m(!0),console.log(e.data)}).catch(e=>{console.log(e)})):E.createReview(a).then(e=>{m(!0)}).catch(e=>{console.log(e)})}},"Submit")))},h=a(23),b=a(32),w=a(41),R=a(14),C=a(54),O=a(53),S=a.n(O);var f=e=>{const[t,a]=Object(n.useState)({id:null,title:"",rated:"",reviews:[]});return Object(n.useEffect)(()=>{var t;t=e.match.params.id,E.get(t).then(e=>{a(e.data),console.log(e.data)}).catch(e=>{console.log(e)})},[e.match.params.id]),l.a.createElement("div",null,l.a.createElement(w.a,null,l.a.createElement(b.a,null,l.a.createElement(h.a,null,l.a.createElement(C.a,{src:t.poster+"/100px250",fluid:!0})),l.a.createElement(h.a,null,l.a.createElement(R.a,null,l.a.createElement(R.a.Header,{as:"h5"},t.title),l.a.createElement(R.a.Body,null,l.a.createElement(R.a.Text,null,t.plot),e.user&&l.a.createElement(o.b,{to:"/movies/"+e.match.params.id+"/review"},"Add Review"))),l.a.createElement("br",null),l.a.createElement("h2",null,"Reviews"),l.a.createElement("br",null),t.reviews.map((t,a)=>l.a.createElement(R.a,{className:"mb-3",key:a},l.a.createElement(R.a.Body,null,l.a.createElement(R.a.Title,null,t.name+" reviewed on ",S()(t.date).format("Do MMMM YYYY")),l.a.createElement(R.a.Text,null,t.review),e.user&&e.user.id===t.user_id&&l.a.createElement(b.a,null,l.a.createElement(h.a,null,l.a.createElement(o.b,{to:{pathname:"/movies/"+e.match.params.id+"/review",state:{currentReview:t}}},"Edit")),l.a.createElement(h.a,null,l.a.createElement(p.a,{variant:"link"},"Delete"))))))))))};var y=e=>{const[t,a]=Object(n.useState)([]),[r,c]=Object(n.useState)(""),[i,m]=Object(n.useState)(""),[s,u]=Object(n.useState)(["All Ratings"]);Object(n.useEffect)(()=>{v(),g()},[]);const v=()=>{E.getAll().then(e=>{console.log(e.data),a(e.data.movies)}).catch(e=>{console.log(e)})},g=()=>{E.getRatings().then(e=>{console.log(e.data),u(["All Ratings"].concat(e.data))}).catch(e=>{console.log(e)})};return l.a.createElement("div",{className:"App"},l.a.createElement(w.a,null,l.a.createElement(d.a,null,l.a.createElement(b.a,null,l.a.createElement(h.a,null,l.a.createElement(d.a.Group,null,l.a.createElement(d.a.Control,{type:"text",placeholder:"Search by title",value:r,onChange:e=>{const t=e.target.value;c(t)}})),l.a.createElement(d.a.Group,null,l.a.createElement(p.a,{variant:"primary",type:"button",onClick:()=>{var e,t;e=r,t="title",E.find(e,t).then(e=>{console.log(e.data),a(e.data.movies)}).catch(e=>{console.log(e)})}},"Search"))))),l.a.createElement(b.a,null,t.map(e=>l.a.createElement(h.a,null,l.a.createElement(R.a,{style:{width:"18rem"}},l.a.createElement(R.a.Img,{src:e.poster+"/100px180"}),l.a.createElement(R.a.Body,null,l.a.createElement(R.a.Title,null,e.title),l.a.createElement(R.a.Text,null,"Rating:",e.rated),l.a.createElement(R.a.Text,null,e.plot),l.a.createElement(o.b,{to:"/movies/"+e._id},"View Reviews"))))))))};var _=e=>{const[t,a]=Object(n.useState)(""),[r,c]=Object(n.useState)("");return l.a.createElement("div",null,l.a.createElement(d.a,null,l.a.createElement(d.a.Group,null,l.a.createElement(d.a.Label,null,"Username"),l.a.createElement(d.a.Control,{type:"text",placeholder:"Enter username",value:t,onChange:e=>{const t=e.target.value;a(t)}})),l.a.createElement(d.a.Group,null,l.a.createElement(d.a.Label,null,"ID"),l.a.createElement(d.a.Control,{type:"text",placeholder:"Enter id",value:r,onChange:e=>{const t=e.target.value;c(t)}})),l.a.createElement(p.a,{variant:"primary",onClick:()=>{e.login({name:t,id:r}),e.history.push("/")}},"Submit")))};var T=function(){const[e,t]=l.a.useState(null);async function a(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;t(e)}return l.a.createElement("div",{className:"App"},l.a.createElement(s.a,{bg:"light",expand:"lg"},l.a.createElement(s.a.Brand,{href:"#home"},"HL"),l.a.createElement(s.a.Toggle,{"aria-controls":"basic-navbar-nav"}),l.a.createElement(s.a.Collapse,{id:"basic-navbar-nav"},l.a.createElement(m.a,{className:"mr-auto"},l.a.createElement(m.a.Link,null,l.a.createElement(o.b,{to:"/movies"},"Movies")),l.a.createElement(m.a.Link,null,e?l.a.createElement("a",{onClick:async function(){t(null)}},"Logout User"):l.a.createElement(o.b,{to:"/login"},"Login"))))),l.a.createElement(i.c,null,l.a.createElement(i.a,{exact:!0,path:["/","/movies"],component:y}),l.a.createElement(i.a,{path:"/movies/:id/review",render:t=>l.a.createElement(g,Object.assign({},t,{user:e}))}),l.a.createElement(i.a,{path:"/movies/:id/",render:t=>l.a.createElement(f,Object.assign({},t,{user:e}))}),l.a.createElement(i.a,{path:"/login",render:e=>l.a.createElement(_,Object.assign({},e,{login:a}))})))};var j=e=>{e&&e instanceof Function&&a.e(3).then(a.bind(null,78)).then(t=>{let{getCLS:a,getFID:n,getFCP:l,getLCP:r,getTTFB:c}=t;a(e),n(e),l(e),r(e),c(e)})};c.a.createRoot(document.getElementById("root")).render(l.a.createElement(o.a,null,l.a.createElement(T,null))),j()}},[[56,1,2]]]);
//# sourceMappingURL=main.b1c5b08f.chunk.js.map